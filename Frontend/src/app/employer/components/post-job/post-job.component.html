<div class="post-job-container" @fadeIn>
  <mat-card>
    <mat-card-header>
      <mat-card-title>Post a New Job</mat-card-title>
      <mat-card-subtitle>Fill in the details to create a new job listing</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="jobForm" (ngSubmit)="onSubmit()" class="job-form">
        <!-- Title -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Job Title</mat-label>
          <input matInput formControlName="title" placeholder="e.g. Senior Software Engineer">
          <mat-error *ngIf="title?.hasError('required')">Job title is required</mat-error>
          <mat-error *ngIf="title?.hasError('minlength')">Title must be at least 5 characters</mat-error>
        </mat-form-field>

        <!-- Department -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Department</mat-label>
          <input matInput formControlName="department" placeholder="e.g. Engineering, Marketing, Sales">
          <mat-error *ngIf="department?.hasError('required')">Department is required</mat-error>
        </mat-form-field>

        <!-- Description -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Job Description</mat-label>
          <textarea matInput formControlName="description" rows="6" 
                    placeholder="Describe the job responsibilities, requirements, and benefits"></textarea>
          <mat-error *ngIf="description?.hasError('required')">Description is required</mat-error>
          <mat-error *ngIf="description?.hasError('minlength')">Description must be at least 20 characters</mat-error>
        </mat-form-field>

        <!-- Location -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Location</mat-label>
          <input matInput formControlName="location" placeholder="e.g. New York, NY or Remote">
          <mat-error *ngIf="location?.hasError('required')">Location is required</mat-error>
        </mat-form-field>

        <!-- Job Type -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Job Type</mat-label>
          <mat-select formControlName="jobType">
            <mat-option *ngFor="let type of jobTypes" [value]="type.value">
              {{type.viewValue}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="jobType?.hasError('required')">Job type is required</mat-error>
        </mat-form-field>

        <!-- Experience Level -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Experience Level</mat-label>
          <mat-select formControlName="experienceLevel">
            <mat-option *ngFor="let level of experienceLevels" [value]="level.value">
              {{level.viewValue}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="experienceLevel?.hasError('required')">Experience level is required</mat-error>
        </mat-form-field>

        <!-- Salary Range -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Salary Range</mat-label>
          <input matInput formControlName="salaryRange" placeholder="e.g. $80,000 - $100,000">
          <mat-error *ngIf="salaryRange?.hasError('required')">Salary range is required</mat-error>
        </mat-form-field>

        <!-- Required Skills -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Required Skills</mat-label>
          <mat-chip-grid #chipGrid>
            <mat-chip-row *ngFor="let skill of requiredSkills" (removed)="removeSkill(skill)">
              {{skill}}
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip-row>
          </mat-chip-grid>
          <input placeholder="Add skill..."
                 [matChipInputFor]="chipGrid"
                 (matChipInputTokenEnd)="addSkill($event)">
        </mat-form-field>
      </form>
    </mat-card-content>

    <mat-card-actions>
      <button mat-button routerLink="/employer/listings">Cancel</button>
      <button mat-raised-button color="primary" 
              [disabled]="!jobForm.valid || isLoading"
              (click)="onSubmit()">
        <!-- <mat-spinner diameter="20" *ngIf="isLoading"></mat-spinner> -->
        <span *ngIf="!isLoading">Post Job</span>
      </button>
    </mat-card-actions>
  </mat-card>
</div>