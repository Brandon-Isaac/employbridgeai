<div class="ai-search-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>AI-Powered Candidate Search</mat-card-title>
      <mat-card-subtitle>Find the best candidates using AI</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="search-form">
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>Search Query</mat-label>
          <input matInput [(ngModel)]="searchQuery" placeholder="Enter job title, skills, or keywords">
          <button mat-icon-button matSuffix (click)="onSearch()">
            <i class="fas fa-search"></i>
          </button>
        </mat-form-field>

        <mat-form-field appearance="outline" class="skills-field">
          <mat-label>Required Skills</mat-label>
          <mat-chip-grid #chipGrid>
            <mat-chip-row *ngFor="let skill of requiredSkills" (removed)="removeSkill(skill)">
              {{skill}}
              <button matChipRemove>
                <i class="fas fa-times"></i>
              </button>
            </mat-chip-row>
            <input placeholder="New skill..."
                   [matChipInputFor]="chipGrid"
                   (matChipInputTokenEnd)="addSkill($event)">
          </mat-chip-grid>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Location</mat-label>
          <input matInput [(ngModel)]="location" placeholder="Enter location">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Minimum Experience</mat-label>
          <mat-slider min="0" max="20" step="1" discrete>
            <input matSliderThumb [(ngModel)]="minExperience">
          </mat-slider>
        </mat-form-field>
      </div>

      <div *ngIf="isLoading" class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Searching for candidates...</p>
      </div>

      <div *ngIf="!isLoading && candidates.length > 0" class="results-container">
        <mat-card *ngFor="let candidate of candidates" class="candidate-card">
          <mat-card-header>
            <mat-card-title>{{candidate.name}}</mat-card-title>
            <mat-card-subtitle>
              Match Score: 
              <span class="score-badge" [style.background-color]="getScoreColor(candidate.matchScore)">
                {{candidate.matchScore}}%
              </span>
            </mat-card-subtitle>
          </mat-card-header>

          <mat-card-content>
            <div class="skills-section">
              <h3>Skills</h3>
              <mat-chip-grid>
                <mat-chip-row *ngFor="let skill of candidate.skills">
                  {{skill}}
                </mat-chip-row>
              </mat-chip-grid>
            </div>

            <div class="status-section">
              <h3>Status</h3>
              <mat-chip-row [color]="getStatusColor(candidate.status)">
                {{candidate.status}}
              </mat-chip-row>
            </div>
          </mat-card-content>

          <mat-card-actions>
            <button mat-button color="primary" [routerLink]="['/employer/applications', candidate.applicationId]">
              <i class="fas fa-file-alt"></i> View Application
            </button>
          </mat-card-actions>
        </mat-card>
      </div>

      <div *ngIf="!isLoading && candidates.length === 0" class="no-results">
        <p>No candidates found. Try adjusting your search criteria.</p>
      </div>
    </mat-card-content>
  </mat-card>
</div>