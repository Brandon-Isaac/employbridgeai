<div class="auth-container">
  <div class="loading-overlay" *ngIf="isLoading">
    <app-loading-spinner [size]="48"></app-loading-spinner>
  </div>

  <div class="auth-background">
    <div class="shape shape1"></div>
    <div class="shape shape2"></div>
    <div class="shape shape3"></div>
  </div>
  
  <mat-card class="auth-card" [class.blurred]="isLoading" @cardAnimation>
    <div class="card-content-wrapper">
      <mat-card-header>
        <div class="header-content">
          <div class="app-title-container animate-item">
            <div class="logo-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                <path d="M12 17L12 11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <circle cx="12" cy="8" r="1" fill="currentColor"/>
              </svg>
            </div>
            <h1 class="app-title">Employbridge AI</h1>
          </div>
          <mat-card-title class="animate-item">Welcome Back</mat-card-title>
          <mat-card-subtitle class="animate-item">Sign in to your account</mat-card-subtitle>
        </div>
      </mat-card-header>

      <mat-card-content @formElements>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" (keyup.enter)="onSubmit()">
          <mat-form-field appearance="outline" class="full-width animate-item">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" required placeholder="Enter your email" />
            <i class="fas fa-envelope form-icon" matPrefix></i>
            <app-form-validation
              [control]="loginForm.get('email')"
              fieldName="Email"
            ></app-form-validation>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width animate-item">
            <mat-label>Password</mat-label>
            <input
              matInput
              formControlName="password"
              [type]="hidePassword ? 'password' : 'text'"
              required
              placeholder="Enter your password"
            />
            <i class="fas fa-lock form-icon" matPrefix></i>
            <i class="fas fa-eye form-icon clickable" matSuffix (click)="hidePassword = !hidePassword"></i>
            <app-form-validation
              [control]="loginForm.get('password')"
              fieldName="Password"
            ></app-form-validation>
          </mat-form-field>

          <div class="form-links animate-item">
            <a class="forgot-password" routerLink="/auth/forgot-password">Forgot password?</a>
          </div>

          <mat-form-field appearance="outline" class="full-width animate-item">
            <mat-label>User Type</mat-label>
            <mat-select formControlName="userType" required>
              <mat-option value="jobseeker" [ngStyle]="{'color': 'brown'}">Job Seeker</mat-option>
              <mat-option value="employer" [ngStyle]="{'color': 'green'}">Employer</mat-option>
              <mat-option value="admin" class="admin-option">Admin</mat-option>
            </mat-select>
            <mat-error *ngIf="loginForm.get('userType')?.hasError('required')">
              Please select a user type
            </mat-error>
          </mat-form-field>

          <div class="form-actions animate-item">
            <div class="signup-text">
              Don't have an account? 
              <a routerLink="../signup" class="signup-link">Sign Up</a>
            </div>
            <button 
              mat-raised-button 
              color="primary" 
              type="submit"
              [disabled]="isLoading"
              [@buttonHover]="loginState"
              (mouseenter)="loginState = 'hovered'"
              (mouseleave)="loginState = 'normal'"
              class="login-button"
            >
              <span>Login</span>
              <i class="fas fa-arrow-right login-icon" [class.animate]="loginState === 'hovered'"></i>
            </button>
          </div>
        </form>
      </mat-card-content>
    </div>
  </mat-card>
</div>